#### FluidityFoodstaff ver1.6a for Minecraft 1.7.10 ####


# 前提Ver&Mod

・Minecraft1.7.10 (Client)
・MincraftForge 1.7.10 10.13.2.1291 以上
　※現在の開発はForge1558下で行っています。


# 使用方法

・MincraftForgeの導入後に作成されるmodsフォルダの中に、DLしたファイルを.jarファイルのまま置いてください。


# 配布DL先
 投稿フォーラム：http://forum.minecraftuser.jp/viewtopic.php?f=13&t=17657
 URL：http://defeatedcrow.wiki.fc2.com/wiki/FluidityFoodstuffs



# 概要

　このMODは、AppleMilkTea2向けの支援用小物MODです。
　もちろん単体でも動作します。
　（単体導入の場合、AMT2連携レシピがなくなる代わりに、小麦粉袋のクラフト作成レシピが出現します。
　　性質上、AMT2の玉髄モノクルなど、ゲーム内で鉱石辞書名を確認できる手段がある方が何かと楽かもしれません。）

　また、今後作られる予定のAMT2用アドオンの一部が前提MODとして要求する予定です。

　== 主な機能 ==

　◯食材アイテムの鉱石辞書名の統合

　　食材の鉱石やインゴットに比べて命名がMODによってバラつきやすいため、
　　要求頻度の高いアイテムに限定して統合機能を追加しました。

　　●対象

　　　小麦粉、塩、砂糖、牛乳、小麦、米、小麦の種、水の8種類です。

　　●統合機能

　　　―それぞれのアイテムについて、統合用の名前（food～）および、configで指定した辞書名を互いのアイテムに付与します。
　　　―それぞれの辞書名を利用したクラフトレシピを自動検索し、統合用の名前（food～）で置き換えたレシピを新たに追加。
　　　　（元のレシピは削除しませんので、作成不能レシピが発生することはないと思います。）
　　　―それぞれのアイテムを使用するバニラレシピに、鉱石辞書レシピバージョンを追加。

　　　これらの機能により、辞書名の違いで相互利用できなかったレシピに互換性をもたせます。

　　　　※辞書機能のない精錬レシピや、他MODの独自レシピには対応していません。
　　　　　もともと辞書名で取り扱えるもの（AMT2のプロセッサー系など）では辞書名追加によりある程度の互換性は出来ます。

　　　　※辞書名を何も付けられていないアイテムには対応できません。
　　　　　何かしらついていれば、configの辞書名リストに追加することで対応範囲を広げられます。

　　　　※現在は他MODアイテムの差し替えには対応していません。
　　　　　但し、IMCを利用して他MODから追加、または置き換え処理の禁止をすることは出来ます。

　　　☆レシピ変換対象のコンフィグでの追加（1.4a～）

　　　　1.4aよりコンフィグで追加できるようにしました。

　　　　全クラフトレシピ中の指定したアイテムを、指定した鉱石辞書に変換した新レシピを自動追加します。
　　　　(もとのレシピは削除せず残します。)

　　　　追加方法：
　　　　　コンフィグの「replace recipe」にある「ReplaceMapRegister」の項目に、以下のように文字列として追加して下さい。

　　　　　"MODのID:アイテムの内部名:アイテムのメタデータ:変換後の鉱石辞書名"

　　　　　上記のように、半角の「:」で区切って一つの文字列にしたものを追加していって下さい。
　　　　　メタデータは、「32767」と入れるとメタデータを問わない登録になります。
　　　　　（デフォルトでAMTのハマグリの例を入れてあるので参考にしてみて下さい。）

　　　　　書式が間違っていた場合もクラッシュはしません。
　　　　　ログに成否のメッセージが出るので、登録されず、おかしいときは起動時のログに出てくるかと思います。

　　　☆鉱石辞書のコンフィグでの追加（1.4c～）

　　　　1.4cで搭載。任意のアイテムに辞書名を付けられるようにしてみました。

　　　　これもコンフィグファイルで追加します。書式はレシピ変換対象の追加時と同様です。


　◯一部食材アイテムを液体として取り扱えるようにする

　　液体にすることで、タンクやパイプに通せるようにしたり、Forgeの液体容器機能を利用できます。
　　大容量の取り扱いや輸送が少し楽になると思います。

　　●対象

　　　小麦粉、塩、砂糖、牛乳、小麦、米、小麦の種の7種類です。
　　　
　　●半流体ブロックの追加

　　　内部的には液体ですが、固体ブロックに近い性質を持つブロックです。
　　　若干の危険性があるので取り扱い注意。

　　　・バケツを使って設置・回収ができる。
　　　・他MOD含む液体タンクや液体パイプ（IFluidHandlerを実装しているもの）に流すことが出来る。
　　　・液体としての情報を持つ。

　　　・マテリアルは砂（sand）
　　　・流れない。また、真下が空気ブロックの時は落下する。
　　　・真下がより比重の小さい液体だった場合も、落下して置き換わる。
　　　・上に乗った場合はゆっくりと沈む
　　　・埋まった場合は固形ブロックに埋まったのと同じように窒息ダメージを受ける。
　　　・ジャンプキーで浮き上がる

　　　　※窒息ダメージが発生し、深さ2ブロック以上溜まっているところに落下すると死亡の恐れあり！
　　　　　槽への落下事故には十分に気を付けましょう！！！


　◯液体容器の追加

　　　●バケツ入り半流体　（1000mB、空容器：空バケツ）

　　　　（レシピ）各食材(food～)×8で空バケツを囲うことで作成

　　　　半流体ブロックを設置するために使用します。
　　　　クラフトにより、袋入り食材（後述）8個になります。

　　　●袋入り食材　（100mB、空容器：紙）

　　　　（レシピ）紙×8で、バケツ入り半流体を囲うことで作成

　　　　「food～」の辞書名が付いているので、このMODの機能により様々なレシピに互換性を持つ食材アイテムです。
　　　　また、対応する空容器がバニラの紙なので、タンクから取り出すときも低コストで扱い易いと思います。

　　　　ごみ（紙）が発生しやすいのが難点。
　　　　紙はちょくちょく増殖したり、ロストします。

　　　　※FFM導入時は、FFM牛乳入り容器と、このMODの牛乳入り容器の両方がそれぞれ出現します。

　　　●陶器&竹の水筒　（1.5b～）（200mB、空容器あり）

　　　　（レシピ）

　　　　　・陶器の水筒

　　　　　" X "
　　　　　"Y Y"　X = 木材
　　　　　" Y "　Y = 粘土玉

　　　　　・竹の水筒

　　　　　"X"　X = 木材
　　　　　"Y"　Y = 竹("bamboo")

　　　　　200mBの液体容器です。バケツより簡単に作れる代わりに、容量が小さめ。
　　　　　バニラでは陶器の容器のみ、竹("bamboo")を追加するMODがあれば竹容器も作成可能になります。

　　　　　水、溶岩のみ、（このMODのレシピ置換機能が働いていれば）バケツの代わりにレシピに使用できます。

　　　　　また、5個以上をスタックした状態であれば、右クリックでブロック上の水源を汲むことが出来ます。


　◯液体を扱うブロックの追加

　　　●1tコンテナ（容量：1024バケツ）

　　　（レシピ）

　　　　"XYX"
　　　　"Y Y"　X = 鉄or銅インゴット
　　　　"XYX"　Y = スライムボール

　　　　IBCとも呼ばれる、工場などによく転がっているオーソドックスな中容量タンクです。
　　　　破壊時には中身を保持します。
　　　　GUIを持たず、右クリック操作や液体ホッパー、他MODのパイプなどでのみ操作できます。

　　　　・中身の出し入れには、液体容器アイテム（バケツアイテムなど）を手に持って右クリックします。

　　　　・素手右クリックで内部の情報を表示します。

　　　　☆1.4aより、ディスペンサーを使って設置できるようになりました。
　　　　　また、設置されたIBCはピストンで押すと(カボチャなどのように)ドロップするようになりました。

　　　　　これにより、少し癖はありますが設置・回収を自動化も出来るのではないかなと思います。

     　　★1.6aより、アイテム状態でも液体容器として機能します。
     　　　ブロックとアイテムのどちらの状態でも液体容器として機能する、持ち運びやすいタンクになりました。


　　　●バルブ付き液体ホッパー（容量：80バケツ）

　　　（レシピ）

　　　　"X X"
　　　　"XYX"　X = 鉄or銅インゴット
　　　　" X "　Y = スライムボール

　　　　液体を扱うことの出来るホッパーです。
　　　　IBCコンテナと違い、破壊時には中身(液体)が消滅しますので注意。

　　　　
　　　　・液体容器アイテムからの液体の出し入れ
　
　　　　　　―GUIのスロット(上)に投入することで液体の出し入れができます。
　　　　　　―「cropWheat」など、紙袋入り食材と同じ鉱石辞書名を持つ一部アイテムも入れられます。
　　　　　　　バケツを使って変換レシピを挟む手間を省けるように。

　　　　※IFluidContainerItem(半端な量の液体を入れられるタイプの容器)の場合、バルブの開閉の影響を受けます。ご注意を。

　　　　・インベントリを持つブロックからの搬入出

　　　　　　―真上のブロックのインベントリに液体容器アイテムがあればそれをホッパーのように吸い込みます。
　　　　　　―また、完成品スロットから真下のブロックのインベントリにアイテムを送ることも出来ます。

　　　　・液体タンクやパイプとの連携

　　　　　　―真上にあるタンクから自動で液体を吸い込みます。
　　　　　　―真下にあるタンクやパイプへ自動で液体を排出します。
　　　　　　―流量はバルブで調整可能です。
　　　　　　―タンクを持つエンティティに対しても搬入出ができます。(タンク付きトロッコやボートなど)

　　　　・バルブ付き

　　　　　　―スニーク右クリック または GUI上のボタンで流量を切り替えます。0、1、4、16バケツの4段階。
　　　　　　―現在の流量は、GUI内のアイコンをマウスオーバーすることで確認可能。
　　　　　　―外見上のバルブの開き具合も変化します。

　　　　・水源ブロックの吸い込み・他

　　　　　　―真上にある水源ブロックを吸い取ります。
　　　　　　―おまけ機能として、いっぱいになった大釜からも水を抜いて空にします。
　　　　　　―おまけ2、真上に牛がいると少しずつ牛乳が貯まります。


　　　●電磁弁付き液体ホッパー（容量：80バケツ）

　　　（レシピ）

　　　　"X"　X = 日照センサー
　　　　"Y"　Y = 流体ホッパー
　　　　"Z"　Z = レッドストーンコンパレータ

　　　　液体を扱うことの出来るホッパーです。
　　　　こちらも破壊時には中身(液体)が消滅します。

　　　　手動弁の流体ホッパーとは異なり、設定に応じて自動で弁を開閉してくれます。
　　　　流量は固定です。（400 mB/Tick）

　　　　※手動版とは違い、アイテムスロットはありません。
　　　　　上下にある、IFluidHandler実装エンティティorタイルのみ扱います。


　　　　設定は以下の4通りです。

　　　　・デフォルト：上下に液体タンクがあれば動作します。

　　　　・エンティティ検知モード：エンティティ(タンク付きホッパーやボート)があるときのみ動作します。

　　　　・フィルターモード：フィルターに設定した液体のみを扱います。
　　　　　　　　　　　　　　※フィルターの設定方法…液体の入った容器でGUIのフィルター部分を右クリック
　　　　　　　　　　　　　　※素手ででGUIのフィルタースロットを右クリックすると、設定をクリアします。

　　　　・レッドストーンモード：RS信号を受けている間だけ動作します。

　　　　　いずれの場合でも、上下に流体を搬入出できるタンクが何も無いときは自動停止します。
　　　　

# 既知の不具合&仕様について

・クラフト時によく紙がDupeしたり消滅したりします。仕様です。ちり紙は適宜処分して下さい。
・レシピ自動索敵・追加機能についてはまだ詰めの甘いところがあるため、対応しきれていないことがあります。


# ライセンス

　当ModはMMPL_1.0下で作成・配布を行っております。
　作者　defeatedcrow


# 更新履歴

1.6a
　　　　○仕様変更
　　　　　・IBCがアイテム状態でも液体容器として液体の出し入れを出来るようにした
　　　　　・液体ホッパーが液体容器アイテムを扱う際の動作を、容器のタイプによってパターン分けした。
　　　　　　―これにより、容量1000を越えるスタック可能容器の取扱いが一部できなくなっている
　　　　　・液体ホッパーが液体容器アイテムを扱うとき、バルブ平時のみ引き抜き・開時のみ充填するよう、扱い方に条件ができた
　　　　○修正
　　　　　・ドロッパーのIBCの取扱い動作がディスペンサーそのままだったのを修正

1.5f ○修正
　　　　　・液体ﾎｯﾊﾟｰがIFluidContainerItemを処理方法を少し変更

1.5e ○修正
　　　　　・SS2のspringwaterで水分回復できるように

1.5d ○仕様変更
　　　　・追加液体容器に液体設置機能追加(5個ずつまとめてあつかう)
　　　　・追加液体容器に水、牛乳、SS2飲料水が入っていると飲むことが出来る

1.5c ○修正
　　　　・追加液体容器で水源を汲むときのクラッシュを修正
　　　　・FluidHopper、IBCをIFluidContainerItemに対応させた

1.5b　
　　　○新規追加
　　　　・液体容器2種追加
　　○修正
　　　　・デフォルトの辞書付与対象に、milk180を追加

1.5a　○仕様変更
　　　　・液体ホッパーのモードチェンジをGUI上のボタンクリックでも行えるようにした

1.4e　○不具合修正
　　　　・キー押下判定部分のミス修正

1.4d　○不具合修正
　　　　・マルチプレイ時のクラッシュを修正

1.4c　○機能追加
　　　　・コンフィグを使って任意のアイテムに鉱石辞書名を付ける機能を追加
　　　○仕様変更
　　　　・牛乳パックをAMTのティーメーカーに使えるようにした
　　　　・小麦などの追加流体からジャンプキーで上昇・脱出可能にした
　　　　・流体ホッパーのアイテム処理速度が遅すぎるので短くした

1.4b　○不具合修正
　　　　・1.4aで対応した液体食材化の対象アイテムが、液体ホッパーにホッパーで入れられなかった

1.4a　○機能追加
　　　　・レシピ自動変換の対象アイテムをユーザー側で増やせるコンフィグの追加
　　　　・上記機能を無効化できるコンフィグも追加
　　　○仕様変更
　　　　・IBCコンテナをピストンで壊せるようにした
　　　　・IBCコンテナをディスペンサーで設置可能にした
　　　　・液体ホッパーに一部のアイテム(液体食材化の対象アイテム)を入れて液体に変換する機能の追加
　　　　・液体ホッパーが、バルブ閉時にも牛からミルクを絞れるようにした
　　　○不具合修正
　　　　・牛乳を紙容器に入れられないことがあるのを修正
　　　　・液体ホッパーに液体容器アイテムを入れたときの挙動の修正

1.3a　○新規追加
　　　　・溶岩パック追加
　　　　　―紙に溶岩を詰めた容器。100mB入り。
　　　　　―溶岩バケツを使うレシピに代替として使える。
　　　　・FFM牛乳パック
　　　　　―FFM導入時にのみ出現する。Fluidityの牛乳パックと互換性を持つ。
　　　○仕様変更
　　　　・牛乳パックを牛乳バケツと同じように飲めるようにした

1.2e ○EX
　　　　・zh_CN.lang 追加（TunkShif氏より）

1.2d ○仕様変更
　　　　・以下のコンフィグ項目の追加
　　　　　―流体ホッパーの容量・最小流量変更
　　　　　―電磁弁付きホッパーの容量・最大流量変更
　　　　　―IBCの最大容量変更

1.2c　○マルチプレイ時にGUIの液体ゲージ表示がおかしくなるのを修正

1.2b  ○GUIの液体更新時のクラッシュを修正
　　　　　―AMT2 2.6e修正内容と同じ原因によるもの

1.2a　○Forge1388に互換性を持たせた
　　　　1291でも動作します。1290以前では起動しないよう、要求Verを上げました。
　　　○修正
　　　　・レシピ変換処理を修正

1.1b　○修正
　　　　・液体ホッパーがIFluidBlockの水流を参照した時のぬるぽ落ちを修正
　　　　・AMT2連携レシピのおろし金部分を辞書名にかえた

1.1a　◯新規追加：電磁弁付き流体ホッパー
　　　　・モードに応じて動作する発展型の流体ホッパー
　　　◯仕様変更
　　　　・流体ホッパー類の上面を固形面にした
　　　　　　―敵が湧き、レールを設置できるように

1.0f　◯仕様変更
　　　　・流体ホッパーが複数のタンクを持つ装置の液体タンクから液体を引き抜くときの優先度を変更
　　　　・液体ホッパーが液体を引き抜けるかどうかのチェックを強化
　　　◯EX
　　　　・AMT2のバージョンチェック機能を追加
　　　　　　―2.3dより古い場合は連携要素を読み込まない

1.0e　◯修正
　　　　・鉱石辞書レシピ変換時のクラッシュを修正

1.0d　◯仕様変更
　　　　・流体ホッパーが上下のEntityのタンクも認識するように
　　　　・流体ホッパー破壊時にインベントリのアイテムをドロップするように
　　　　・IBCの中身を消去する単体クラフトレシピ追加
　　　　・IBCの透過度を変更するコンフィグの追加
　　　◯修正
　　　　・IBCを右クリックして流体を充填するときのDupeを修正
　　　◯EX
　　　　・AMT2のティーメーカーが空の時、右クリックで紙→水パックの充填ができるように


1.0b　◯水パックの追加とバニラ水バケツのレシピ差し替え
　　　◯不具合の修正
　　　　・MODの組み合わせによっては起動しない不具合の修正
　　　　・液体ホッパーでブロックのインベントリにアイテムを出し入れした時のDuoeを修正
　　　　・ShapedRecipeへの小麦→小麦粉への差し替えを削除（Shapelessのみとした）
　　　　　ShapedRecipeの場合はホワイトリスト方式として手動でレシピを追加する

1.0a 初回公開